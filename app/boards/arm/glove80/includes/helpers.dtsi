/*
 * Helper Macros and Layer Definitions for Glove80
 * Based on https://github.com/urob/zmk-helpers/
 */

#pragma once

#define ZMK_HELPER_STRINGIFY(x) #x

// Preprocessor mechanism to overload macros, cf. https://stackoverflow.com/a/27051616/6114651
#define VARGS_(_10, _9, _8, _7, _6, _5, _4, _3, _2, _1, N, ...) N
#define VARGS(...) VARGS_(__VA_ARGS__, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
#define CONCAT_(a, b) a##b
#define CONCAT(a, b) CONCAT_(a, b)

#define ZMK_BEHAVIOR_CORE_tap_dance  \
    compatible = "zmk,behavior-tap-dance"; \
    #binding-cells = <0>

#define ZMK_BEHAVIOR(name, type, ...) \
    name: name { \
        ZMK_BEHAVIOR_CORE_ ## type; \
        __VA_ARGS__ \
    };

#define ZMK_TAP_DANCE(name, ...) \
    ZMK_BEHAVIOR(name, tap_dance, __VA_ARGS__)

#define ZMK_TD_LAYER(name, layer) \
    ZMK_TAP_DANCE(name, \
        tapping-term-ms = <200>; \
        bindings = <&mo layer>, <&to layer>; \
)

/* Automatically generated layer name #define */
/* macOS layers (0-23) */
#define LAYER_QWERTY 0
#define LAYER_Typing 1
#define LAYER_LeftPinky 2
#define LAYER_LeftRingy 3
#define LAYER_LeftMiddy 4
#define LAYER_LeftIndex 5
#define LAYER_RightPinky 6
#define LAYER_RightRingy 7
#define LAYER_RightMiddy 8
#define LAYER_RightIndex 9
#define LAYER_Cursor 10
#define LAYER_Number 11
#define LAYER_Function 12
#define LAYER_Emoji 13
#define LAYER_World 14
#define LAYER_Symbol 15
#define LAYER_System 16
#define LAYER_Mouse 17
#define LAYER_MouseFine 18
#define LAYER_MouseSlow 19
#define LAYER_MouseFast 20
#define LAYER_MouseWarp 21
#define LAYER_Factory 22
#define LAYER_Lower 23
#define LAYER_Magic 24

/* Linux layers (25-48) */
#define LAYER_QWERTY_Linux 25
#define LAYER_Typing_Linux 26
#define LAYER_LeftPinky_Linux 27
#define LAYER_LeftRingy_Linux 28
#define LAYER_LeftMiddy_Linux 29
#define LAYER_LeftIndex_Linux 30
#define LAYER_RightPinky_Linux 31
#define LAYER_RightRingy_Linux 32
#define LAYER_RightMiddy_Linux 33
#define LAYER_RightIndex_Linux 34
#define LAYER_Cursor_Linux 35
#define LAYER_Number_Linux 36
#define LAYER_Function_Linux 37
#define LAYER_Emoji_Linux 38
#define LAYER_World_Linux 39
#define LAYER_Symbol_Linux 40
#define LAYER_System_Linux 41
#define LAYER_Mouse_Linux 42
#define LAYER_MouseFine_Linux 43
#define LAYER_MouseSlow_Linux 44
#define LAYER_MouseFast_Linux 45
#define LAYER_MouseWarp_Linux 46
#define LAYER_Factory_Linux 47
#define LAYER_Lower_Linux 48
#define LAYER_Magic_Linux 49

/* To deal with the situation where there is no Lower layer, to keep &lower happy */
#ifndef LAYER_Lower
#define LAYER_Lower 0
#endif
